# AiCarpool æ‹¼è½¦æœåŠ¡å¹³å°

<div align="center">

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Next.js](https://img.shields.io/badge/Next.js-15.4+-blue.svg)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5+-blue.svg)](https://www.typescriptlang.org/)
[![MySQL](https://img.shields.io/badge/MySQL-8+-orange.svg)](https://www.mysql.com/)

**ğŸš— ä¼ä¸šçº§AIæœåŠ¡æ‹¼è½¦ç®¡ç†å¹³å°ï¼Œæ”¯æŒå¤šAIæœåŠ¡èšåˆã€æ™ºèƒ½è·¯ç”±ã€æˆæœ¬åˆ†æ‘Š**

**ğŸ†• v0.8.6 - æƒé™ç®¡ç†ä¸é¢„ç®—æ§åˆ¶å…¨é¢å‡çº§ï¼šRBACæƒé™ç³»ç»Ÿã€è§’è‰²ç®¡ç†å¯¹è¯æ¡†ã€é¢„ç®—ç®¡ç†æ¨¡å—** 

</div>

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¢ ä¼ä¸šçº§ç®¡ç† (v0.8.6 å…¨é¢å‡çº§)
- âœ… **ä¼ä¸šç»„ç»‡**: åˆ›å»ºå’Œç®¡ç†ä¼ä¸šçº§ç»„ç»‡æ¶æ„
- âœ… **æƒé™ç®¡ç†**: å®Œæ•´çš„RBACæƒé™ç³»ç»Ÿï¼Œæ”¯æŒè§’è‰²ç®¡ç†å¯¹è¯æ¡†
- âœ… **é¢„ç®—æ§åˆ¶**: å…¨æ–°é¢„ç®—ç®¡ç†æ¨¡å—ï¼ŒAIæœåŠ¡æˆæœ¬åˆ†æä¸ç›‘æ§
- âœ… **ç”¨æˆ·ç®¡ç†**: æ‰¹é‡ç”¨æˆ·æ“ä½œã€æƒé™åˆ†é…ã€è§’è‰²ç»Ÿè®¡
- âœ… **éƒ¨é—¨ç®¡ç†**: å¤šçº§éƒ¨é—¨ç»“æ„ï¼Œæ”¯æŒå¤æ‚ä¼ä¸šæ¶æ„

### ğŸ¯ æ‹¼è½¦ç»„ç®¡ç†
- âœ… **ç»„ç»‡ç®¡ç†**: åˆ›å»ºå’Œç®¡ç†å¤šä¸ªæ‹¼è½¦ç»„ï¼Œæ”¯æŒä¸åŒä¸šåŠ¡åœºæ™¯
- âœ… **æˆå‘˜æƒé™**: ç»†ç²’åº¦è§’è‰²æƒé™ï¼ˆç»„é•¿ã€ç®¡ç†å‘˜ã€æˆå‘˜ï¼‰
- âœ… **é‚€è¯·ç³»ç»Ÿ**: é‚®ä»¶é‚®è¯·é“¾æ¥ï¼Œå¿«é€ŸåŠ å…¥æ‹¼è½¦ç»„
- âœ… **ä½¿ç”¨ç»Ÿè®¡**: æ¯ä¸ªç»„çš„è¯¦ç»†ä½¿ç”¨æƒ…å†µå’Œæˆæœ¬åˆ†æ

### ğŸ¤– å¤šAIæœåŠ¡æ”¯æŒ
- âœ… **æœåŠ¡èšåˆ**: æ”¯æŒClaudeã€GPTã€é€šä¹‰åƒé—®ç­‰ä¸»æµAIæœåŠ¡
- âœ… **æ™ºèƒ½è·¯ç”±**: åŸºäºå¯ç”¨æ€§ã€æˆæœ¬ã€æ€§èƒ½çš„æ™ºèƒ½è¯·æ±‚åˆ†å‘
- âœ… **è´Ÿè½½å‡è¡¡**: å¤šè´¦æˆ·è½®æ¢ï¼Œé¿å…å•è´¦æˆ·è¿‡è½½
- âœ… **æ•…éšœè½¬ç§»**: è‡ªåŠ¨æ£€æµ‹æœåŠ¡å¼‚å¸¸å¹¶åˆ‡æ¢åˆ°å¤‡ç”¨æœåŠ¡

### ğŸ“Š é…é¢ä¸ç›‘æ§
- âœ… **ç²¾ç»†é…é¢**: æŒ‰ç”¨æˆ·ã€æŒ‰ç»„ã€æŒ‰æœåŠ¡çš„å¤šç»´åº¦é…é¢æ§åˆ¶
- âœ… **å®æ—¶ç›‘æ§**: ä½¿ç”¨é‡ã€æˆæœ¬ã€æ€§èƒ½æŒ‡æ ‡å®æ—¶ç›‘æ§
- âœ… **å‘Šè­¦é€šçŸ¥**: é…é¢é¢„è­¦ã€æœåŠ¡å¼‚å¸¸ç­‰æ™ºèƒ½å‘Šè­¦
- âœ… **æ•°æ®åˆ†æ**: ä½¿ç”¨è¶‹åŠ¿ã€æˆæœ¬åˆ†æã€æ€§èƒ½æŠ¥å‘Š

### ğŸŒ ä»£ç†ä¸éƒ¨ç½²
- âœ… **ä»£ç†ç®¡ç†**: æ”¯æŒHTTP/SOCKS5ä»£ç†ï¼Œç¡®ä¿æœåŠ¡å¯è¾¾æ€§
- âœ… **å¤šéƒ¨ç½²æ¨¡å¼**: é›†ä¸­åŒ–ã€åˆ†å¸ƒå¼ã€æ··åˆéƒ¨ç½²æ¶æ„
- âœ… **è¾¹ç¼˜èŠ‚ç‚¹**: åˆ†å¸ƒå¼è¾¹ç¼˜èŠ‚ç‚¹ï¼Œå°±è¿‘å¤„ç†è¯·æ±‚
- âœ… **IPç®¡ç†**: é™æ€IPä»£ç†é…ç½®ï¼Œç¨³å®šè®¿é—®æµ·å¤–æœåŠ¡

---

## ğŸ“‹ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Next.js 15 + React 19 + TypeScript + Tailwind CSS
- **åç«¯**: Next.js API Routes + Prisma ORM
- **æ•°æ®åº“**: MySQL + Redis
- **è®¤è¯**: JWT + NextAuth.js
- **é‚®ä»¶**: React Email + Nodemailer
- **UIç»„ä»¶**: shadcn/ui + Radix UI

---

## ğŸ› ï¸ æœ¬åœ°å¼€å‘

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- MySQL 8.0+
- Redis 6+

### å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰

**ä¸€é”®å¿«é€Ÿå®‰è£…ï¼ˆè‡ªåŠ¨é¿å…æ•°æ®åº“è¿ç§»å†²çªï¼‰ï¼š**
```bash
# å¿«é€Ÿæ¨¡å¼å®‰è£…ï¼Œé¿å…è¿ç§»é—®é¢˜
curl -fsSL https://raw.githubusercontent.com/codingauto/aicarpool/main/scripts/install.sh | QUICK_MODE=true bash
```

**æ ‡å‡†å®‰è£…ï¼ˆä¼ ç»Ÿè¿ç§»æ¨¡å¼ï¼‰ï¼š**
```bash
# é€šç”¨å®‰è£…è„šæœ¬ï¼ˆè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿï¼‰
curl -fsSL https://raw.githubusercontent.com/codingauto/aicarpool/main/scripts/install.sh | bash

# Ubuntu/Debian ç³»ç»Ÿ
curl -fsSL https://raw.githubusercontent.com/codingauto/aicarpool/main/scripts/deploy-ubuntu.sh | bash

# CentOS/RHEL ç³»ç»Ÿ  
curl -fsSL https://raw.githubusercontent.com/codingauto/aicarpool/main/scripts/deploy-centos.sh | bash
```

### æœ¬åœ°å¼€å‘å®‰è£…

**å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰ï¼š**
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/codingauto/aicarpool.git
cd aicarpool

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘ .env.local é…ç½®æ•°æ®åº“è¿æ¥

# 4. å¿«é€Ÿåˆå§‹åŒ–æ•°æ®åº“ï¼ˆé¿å…è¿ç§»å†²çªï¼‰
npm run quick-install

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

**ä¼ ç»Ÿå®‰è£…æ–¹å¼ï¼š**
```bash
# 1-3 æ­¥éª¤ç›¸åŒ...

# 4. ä¼ ç»Ÿæ•°æ®åº“è¿ç§»
npx prisma migrate dev
npx prisma db seed
npm run db:create-admin

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### å¼€å‘å‘½ä»¤

```bash
# åº”ç”¨å¼€å‘
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start        # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run lint         # ä»£ç æ£€æŸ¥
npm run typecheck    # TypeScriptç±»å‹æ£€æŸ¥

# å¿«é€Ÿå®‰è£…ç›¸å…³
npm run quick-install    # ä¸€é”®å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰
npm run db:reset         # é‡ç½®æ•°æ®åº“ï¼ˆå¼ºåˆ¶æ¨é€schemaï¼‰
npm run db:init          # åˆå§‹åŒ–æ•°æ®åº“å’Œç®¡ç†å‘˜

# æ•°æ®åº“ç›¸å…³ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰
npx prisma generate       # ç”ŸæˆPrismaå®¢æˆ·ç«¯
npx prisma migrate dev     # åˆ›å»ºå¼€å‘è¿ç§»
npx prisma studio         # æ‰“å¼€æ•°æ®åº“ç®¡ç†ç•Œé¢
npm run db:seed           # åˆå§‹åŒ–ç§å­æ•°æ®
npm run db:create-admin   # åˆ›å»ºç®¡ç†å‘˜è´¦å·
```

---

## ğŸ® ä½¿ç”¨æŒ‡å—

### 1. åˆ›å»ºç®¡ç†å‘˜è´¦å·
é¦–æ¬¡éƒ¨ç½²åï¼Œéœ€è¦åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼š
```bash
npm run db:create-admin
```
é»˜è®¤ç®¡ç†å‘˜ä¿¡æ¯ï¼š
- **é‚®ç®±**: admin@aicarpool.com
- **å¯†ç **: admin123456
- **è§’è‰²**: admin

âš ï¸ **é‡è¦**ï¼šé¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼

### 2. è®¿é—®ç®¡ç†ç•Œé¢
æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:4000`ï¼ˆå¼€å‘ç¯å¢ƒï¼‰æˆ– `http://localhost:3000`ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

### 3. ä¼ä¸šçº§ç®¡ç† (v0.6.2)
ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•åï¼š
1. è¿›å…¥ã€Œä¼ä¸šç®¡ç†ã€é¡µé¢
2. åˆ›å»ºä¼ä¸šç»„ç»‡
3. è®¾ç½®éƒ¨é—¨ç»“æ„
4. é…ç½®è´¦å·æ± å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥
5. åˆ†é…é¢„ç®—å’Œè®¾ç½®æƒé™

### 4. é…ç½®AIæœåŠ¡
1. è¿›å…¥ã€ŒAIæœåŠ¡ç®¡ç†ã€é¡µé¢
2. æ·»åŠ AIæœåŠ¡ï¼ˆClaudeã€GPTç­‰ï¼‰
3. é…ç½®APIå¯†é’¥å’Œä»£ç†è®¾ç½®
4. æµ‹è¯•è¿æ¥

### 5. åˆ›å»ºæ‹¼è½¦ç»„
1. è¿›å…¥ã€Œæ‹¼è½¦ç»„ç®¡ç†ã€é¡µé¢
2. åˆ›å»ºæ–°çš„æ‹¼è½¦ç»„
3. è®¾ç½®æˆå‘˜æƒé™å’Œé…é¢
4. é‚€è¯·æˆå‘˜åŠ å…¥

### 6. é€‰æ‹©éƒ¨ç½²æ¨¡å¼
æ ¹æ®å›¢é˜Ÿè§„æ¨¡é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ¨¡å¼ï¼š
- **é›†ä¸­åŒ–æ¨¡å¼**: é€‚åˆå°å›¢é˜Ÿï¼ˆ<10äººï¼‰
- **åˆ†å¸ƒå¼æ¨¡å¼**: é€‚åˆå¤§å›¢é˜Ÿï¼ˆ>20äººï¼‰
- **æ··åˆæ¨¡å¼**: çµæ´»é…ç½®ï¼Œå¹³è¡¡æ€§èƒ½å’Œæˆæœ¬

---

## ğŸŒŸ ä¸»è¦APIæ¥å£

### è®¤è¯æ¥å£
```http
POST /api/auth/login      # ç”¨æˆ·ç™»å½•
POST /api/auth/register   # ç”¨æˆ·æ³¨å†Œ
GET  /api/auth/me         # è·å–ç”¨æˆ·ä¿¡æ¯
```

### æ‹¼è½¦ç»„ç®¡ç†
```http
GET    /api/groups        # è·å–æ‹¼è½¦ç»„åˆ—è¡¨
POST   /api/groups        # åˆ›å»ºæ‹¼è½¦ç»„
GET    /api/groups/[id]   # è·å–æ‹¼è½¦ç»„è¯¦æƒ…
PUT    /api/groups/[id]   # æ›´æ–°æ‹¼è½¦ç»„
POST   /api/groups/[id]/invite  # é‚€è¯·æˆå‘˜
```

### ä¼ä¸šç®¡ç†æ¥å£ (v0.6.2 æ–°å¢)
```http
GET    /api/enterprises                    # è·å–ä¼ä¸šåˆ—è¡¨
POST   /api/enterprises                    # åˆ›å»ºä¼ä¸š
GET    /api/enterprises/[id]               # è·å–ä¼ä¸šè¯¦æƒ…
PUT    /api/enterprises/[id]               # æ›´æ–°ä¼ä¸š
DELETE /api/enterprises/[id]               # åˆ é™¤ä¼ä¸š
GET    /api/enterprises/[id]/departments   # è·å–éƒ¨é—¨åˆ—è¡¨
POST   /api/enterprises/[id]/departments   # åˆ›å»ºéƒ¨é—¨
GET    /api/enterprises/[id]/account-pools # è·å–è´¦å·æ± åˆ—è¡¨
POST   /api/enterprises/[id]/account-pools # åˆ›å»ºè´¦å·æ± 
```

### AIæœåŠ¡æ¥å£
```http
POST /api/chat/completions  # èŠå¤©è¡¥å…¨
GET  /api/models           # è·å–æ¨¡å‹åˆ—è¡¨
GET  /api/usage            # ä½¿ç”¨ç»Ÿè®¡
```

---

## ğŸ“ˆ é¡¹ç›®ç»“æ„

```
aicarpool/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                 # Next.jsé¡µé¢å’ŒAPIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ enterprises/ # ä¼ä¸šç®¡ç†API (v0.6.2)
â”‚   â”‚   â”‚   â”œâ”€â”€ groups/     # æ‹¼è½¦ç»„API
â”‚   â”‚   â”‚   â””â”€â”€ auth/       # è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ enterprise/     # ä¼ä¸šç®¡ç†é¡µé¢ (v0.6.2)
â”‚   â”‚   â””â”€â”€ dashboard/      # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/             # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ enterprise/     # ä¼ä¸šç®¡ç†ç»„ä»¶ (v0.6.2)
â”‚   â”‚   â””â”€â”€ groups/         # æ‹¼è½¦ç»„ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                # å·¥å…·åº“å’Œé…ç½®
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hook
â”‚   â””â”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ prisma/                 # æ•°æ®åº“schemaå’Œè¿ç§»
â”‚   â”œâ”€â”€ schema.prisma       # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ seed-enterprise.ts  # ä¼ä¸šæ•°æ®ç§å­ (v0.6.2)
â”‚   â””â”€â”€ create-admin.ts     # ç®¡ç†å‘˜è´¦å·åˆ›å»º (v0.6.2)
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â””â”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ”§ éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒè¦æ±‚

**ç¡¬ä»¶è¦æ±‚ï¼ˆæœ€ä½é…ç½®ï¼‰ï¼š**
- **CPU**: 2æ ¸å¿ƒ
- **å†…å­˜**: 4GBï¼ˆå»ºè®®8GBï¼‰
- **ç¡¬ç›˜**: 50GBå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„ç½‘ç»œè¿æ¥

**æŠ€æœ¯æ ˆï¼š**
- **Node.js** 18+
- **MySQL** 8.0+
- **Redis** 6+
- **Docker** (å¯é€‰)

### æ‰‹åŠ¨éƒ¨ç½²

#### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

**Ubuntu/Debianç”¨æˆ·ï¼š**
```bash
# å®‰è£…Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£…MySQL
sudo apt update
sudo apt install mysql-server
sudo systemctl start mysql
sudo systemctl enable mysql

# å®‰è£…Redis
sudo apt install redis-server
sudo systemctl start redis-server
sudo systemctl enable redis-server
```

**CentOS/RHELç”¨æˆ·ï¼š**
```bash
# å®‰è£…Node.js
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs

# å®‰è£…MySQL
sudo yum install mysql-server
sudo systemctl start mysqld
sudo systemctl enable mysqld

# å®‰è£…Redis
sudo yum install redis
sudo systemctl start redis
sudo systemctl enable redis
```

#### ç¬¬äºŒæ­¥ï¼šä¸‹è½½å’Œé…ç½®

```bash
# ä¸‹è½½é¡¹ç›®
git clone https://github.com/codingauto/aicarpool.git
cd aicarpool

# å®‰è£…ä¾èµ–
npm install

# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env.local
```

#### ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼š
```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL="mysql://username:password@localhost:3306/aicarpool"

# Redisé…ç½®
REDIS_URL="redis://localhost:6379"

# JWTå¯†é’¥ï¼ˆéšæœºç”Ÿæˆ32å­—ç¬¦ä»¥ä¸Šï¼‰
NEXTAUTH_SECRET="your_random_secret_key_here"

# åº”ç”¨é…ç½®
NEXTAUTH_URL="http://localhost:3000"
NODE_ENV="production"

# é‚®ä»¶é…ç½®ï¼ˆå¯é€‰ï¼‰
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your_email@gmail.com"
SMTP_PASSWORD="your_app_password"

# AIæœåŠ¡é…ç½®ï¼ˆæ ¹æ®éœ€è¦é…ç½®ï¼‰
CLAUDE_API_KEY="your_claude_api_key"
OPENAI_API_KEY="your_openai_api_key"
```

#### ç¬¬å››æ­¥ï¼šæ•°æ®åº“åˆå§‹åŒ–

**å¿«é€Ÿæ¨¡å¼ï¼ˆæ¨èï¼Œé¿å…è¿ç§»å†²çªï¼‰ï¼š**
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE aicarpool;"

# ä¸€é”®å¿«é€Ÿåˆå§‹åŒ–
npm run quick-install
```

**ä¼ ç»Ÿæ¨¡å¼ï¼ˆä½¿ç”¨è¿ç§»ï¼‰ï¼š**
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE aicarpool;"

# ç”ŸæˆPrismaå®¢æˆ·ç«¯
npx prisma generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate deploy

# åˆå§‹åŒ–ç§å­æ•°æ®
npm run db:seed

# åˆ›å»ºç®¡ç†å‘˜è´¦å·
npm run db:create-admin
```

#### ç¬¬äº”æ­¥ï¼šæ„å»ºå’Œå¯åŠ¨

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# æˆ–ä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹ï¼ˆæ¨èï¼‰
npm install -g pm2
pm2 start npm --name "aicarpool" -- start
pm2 save
pm2 startup
```

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ä½¿ç”¨Docker Composeï¼ˆæœ€ç®€å•ï¼‰

åˆ›å»º `docker-compose.yml` æ–‡ä»¶ï¼š
```yaml
version: '3.8'
services:
  aicarpool:
    build: .
    container_name: aicarpool-app
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=mysql://aicarpool:password@mysql:3306/aicarpool
      - REDIS_URL=redis://redis:6379
      - NEXTAUTH_SECRET=your_random_secret_key_here
      - NEXTAUTH_URL=http://localhost:3000
      - NODE_ENV=production
    depends_on:
      - mysql
      - redis
    volumes:
      - ./logs:/app/logs

  mysql:
    image: mysql:8.0
    container_name: aicarpool-mysql
    restart: unless-stopped
    environment:
      - MYSQL_ROOT_PASSWORD=rootpassword
      - MYSQL_DATABASE=aicarpool
      - MYSQL_USER=aicarpool
      - MYSQL_PASSWORD=password
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - "3306:3306"

  redis:
    image: redis:7-alpine
    container_name: aicarpool-redis
    restart: unless-stopped
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"

  # å¯é€‰ï¼šæ·»åŠ nginxåå‘ä»£ç†
  nginx:
    image: nginx:alpine
    container_name: aicarpool-nginx
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/ssl
    depends_on:
      - aicarpool

volumes:
  mysql_data:
  redis_data:
```

#### å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f aicarpool

# è¿›å…¥å®¹å™¨æ‰§è¡Œæ•°æ®åº“è¿ç§»
docker-compose exec aicarpool npx prisma migrate deploy
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

#### 1. åå‘ä»£ç†é…ç½®ï¼ˆNginxï¼‰

åˆ›å»º `nginx.conf` æ–‡ä»¶ï¼š
```nginx
events {
    worker_connections 1024;
}

http {
    upstream aicarpool {
        server aicarpool:3000;
    }

    server {
        listen 80;
        server_name your-domain.com;
        
        # é‡å®šå‘åˆ°HTTPS
        return 301 https://$server_name$request_uri;
    }

    server {
        listen 443 ssl http2;
        server_name your-domain.com;
        
        # SSLé…ç½®
        ssl_certificate /etc/ssl/your-domain.crt;
        ssl_certificate_key /etc/ssl/your-domain.key;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers HIGH:!aNULL:!MD5;
        
        # å®‰å…¨å¤´
        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
        add_header X-Frame-Options "DENY" always;
        add_header X-Content-Type-Options "nosniff" always;
        
        location / {
            proxy_pass http://aicarpool;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_cache_bypass $http_upgrade;
            
            # æ”¯æŒé•¿è¿æ¥
            proxy_read_timeout 300s;
            proxy_connect_timeout 75s;
        }
    }
}
```

#### 2. SSLè¯ä¹¦é…ç½®

**ä½¿ç”¨Let's Encryptï¼ˆå…è´¹ï¼‰ï¼š**
```bash
# å®‰è£…certbot
sudo apt install certbot python3-certbot-nginx

# ç”³è¯·è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ï¼š0 12 * * * /usr/bin/certbot renew --quiet
```

#### 3. ç›‘æ§å’Œæ—¥å¿—

**ä½¿ç”¨PM2ç›‘æ§ï¼š**
```bash
# å®‰è£…PM2
npm install -g pm2

# åˆ›å»ºPM2é…ç½®æ–‡ä»¶ ecosystem.config.js
module.exports = {
  apps: [{
    name: 'aicarpool',
    script: 'npm',
    args: 'start',
    cwd: '/path/to/aicarpool',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    log_file: './logs/combined.log',
    out_file: './logs/out.log',
    error_file: './logs/error.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    merge_logs: true,
    max_memory_restart: '1G'
  }]
};

# å¯åŠ¨åº”ç”¨
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

#### 4. æ•°æ®åº“å¤‡ä»½ç­–ç•¥

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬ backup.sh
#!/bin/bash
DATE=$(date +"%Y%m%d_%H%M%S")
BACKUP_DIR="/backup/mysql"
mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®åº“
mysqldump -u aicarpool -p aicarpool > $BACKUP_DIR/aicarpool_$DATE.sql

# ä¿ç•™æœ€è¿‘30å¤©çš„å¤‡ä»½
find $BACKUP_DIR -name "aicarpool_*.sql" -mtime +30 -delete

# æ·»åŠ åˆ°crontabæ¯æ—¥å¤‡ä»½
# 0 2 * * * /path/to/backup.sh
```

### è„šæœ¬ç®¡ç†

**å‡çº§åº”ç”¨ï¼š**
```bash
# è¿›å…¥åº”ç”¨ç›®å½•
cd /opt/aicarpool

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# å®‰è£…æ–°ä¾èµ–
npm install

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate deploy

# é‡æ–°æ„å»º
npm run build

# é‡å¯æœåŠ¡
pm2 restart aicarpool
```

**å®Œå…¨å¸è½½ï¼š**
```bash
# ä¸‹è½½å¹¶è¿è¡Œå¸è½½è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/codingauto/aicarpool/main/scripts/uninstall.sh | bash

# æˆ–æœ¬åœ°è¿è¡Œ
bash /opt/aicarpool/scripts/uninstall.sh
```

**ä¸€é”®æ›´æ–°ï¼ˆæ¨èï¼‰ï¼š**
```bash
# ä½¿ç”¨æ›´æ–°è„šæœ¬ï¼ˆè‡ªåŠ¨å¤‡ä»½é…ç½®ã€æ›´æ–°ä»£ç ã€é‡å¯æœåŠ¡ï¼‰
bash /opt/aicarpool/scripts/update.sh

# æˆ–è€…ä»ç½‘ç»œä¸‹è½½æœ€æ–°çš„æ›´æ–°è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/codingauto/aicarpool/main/scripts/update.sh | bash
```

**æœåŠ¡ç®¡ç†ï¼š**
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs aicarpool

# é‡å¯åº”ç”¨
pm2 restart aicarpool

# åœæ­¢åº”ç”¨
pm2 stop aicarpool

# æŸ¥çœ‹èµ„æºä½¿ç”¨
pm2 monit

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
cd /opt/aicarpool && git log --oneline -5
```

**Gitç›¸å…³æ“ä½œï¼š**
```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯
bash /opt/aicarpool/scripts/update.sh --version

# æ£€æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬
cd /opt/aicarpool
git fetch origin
git log --oneline HEAD..origin/main

# æ‰‹åŠ¨æ›´æ–°ä»£ç ï¼ˆä¸æ¨èï¼Œå»ºè®®ä½¿ç”¨update.shï¼‰
cd /opt/aicarpool
git stash  # å¤‡ä»½æœ¬åœ°ä¿®æ”¹
git pull origin main  # æ›´æ–°ä»£ç 
npm install  # æ›´æ–°ä¾èµ–
npm run build  # é‡æ–°æ„å»º
pm2 restart aicarpool  # é‡å¯æœåŠ¡
```

---

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥MySQLæœåŠ¡
systemctl status mysql  # Ubuntu/Debian
systemctl status mysqld # CentOS/RHEL
mysql -u root -p -e "SHOW DATABASES;"
```

**Redisè¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥RedisæœåŠ¡
systemctl status redis-server  # Ubuntu/Debian
systemctl status redis         # CentOS/RHEL
redis-cli ping
```

**Gitç›¸å…³é—®é¢˜**
```bash
# Gitå…‹éš†å¤±è´¥ï¼ˆç½‘ç»œé—®é¢˜ï¼‰
# é…ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
git config --global http.proxy http://proxy-server:port
git config --global https.proxy https://proxy-server:port

# æ¸…é™¤ä»£ç†é…ç½®
git config --global --unset http.proxy
git config --global --unset https.proxy

# æ£€æŸ¥Gité…ç½®
git config --global --list
```

**æ›´æ–°å¤±è´¥**
```bash
# é‡ç½®æœ¬åœ°ä¿®æ”¹
cd /opt/aicarpool
git stash  # æˆ–è€… git reset --hard HEAD
git pull origin main

# å¼ºåˆ¶æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
git fetch origin
git reset --hard origin/main
```

**æ„å»ºå¤±è´¥**
```bash
# æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
cd /opt/aicarpool
rm -rf node_modules package-lock.json .next
npm install
npm run build
```

**æœåŠ¡å¯åŠ¨å¤±è´¥**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
ss -tlnp | grep 3000
# æˆ–è€…
netstat -tlnp | grep 3000

# æ£€æŸ¥PM2çŠ¶æ€
pm2 status
pm2 logs aicarpool

# é‡å¯æœåŠ¡
pm2 delete aicarpool
bash /opt/aicarpool/scripts/update.sh
```

---

## ğŸ“ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

### v0.8.6 (2025-08-04) - æƒé™ç®¡ç†ä¸é¢„ç®—æ§åˆ¶å…¨é¢å‡çº§
- ğŸ¢ **RBACæƒé™ç³»ç»Ÿä¼˜åŒ–**
  - å®Œå–„è§’è‰²ç®¡ç†å¯¹è¯æ¡†å¸ƒå±€
  - ä¿®å¤æ–‡æœ¬é‡å å’Œå¡ç‰‡é—´è·é—®é¢˜
  - ä¼˜åŒ–æƒé™åˆ†é…ç•Œé¢ç”¨æˆ·ä½“éªŒ
- ğŸ’° **é¢„ç®—ç®¡ç†æ¨¡å—**
  - æ–°å¢ä¼ä¸šé¢„ç®—ç®¡ç†é¡µé¢ `/enterprise/[id]/budget`
  - é¢„ç®—æ¦‚è§ˆã€æœåŠ¡åˆ†æå’Œé…ç½®è®¾ç½®
  - æˆæœ¬è¶‹åŠ¿å›¾è¡¨å’Œä½¿ç”¨ç»Ÿè®¡
- âš¡ **å¿«é€Ÿå®‰è£…ä¼˜åŒ–**
  - æ–°å¢ `npm run quick-install` å¿«é€Ÿå®‰è£…å‘½ä»¤
  - æ”¯æŒ `QUICK_MODE=true` ç¯å¢ƒå˜é‡é¿å…è¿ç§»å†²çª
  - ä¼˜åŒ–å®‰è£…è„šæœ¬ï¼Œå‡å°‘éƒ¨ç½²æ—¶é—´å’Œé”™è¯¯
- ğŸ”§ **å¼€å‘ä½“éªŒæ”¹è¿›**
  - æ¸…ç†å†²çªçš„æ•°æ®åº“è¿ç§»æ–‡ä»¶
  - æ›´æ–°READMEæ–‡æ¡£å’Œå®‰è£…æŒ‡å—
  - å®Œå–„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### v0.6.2 (2025-08-01) - ä¼ä¸šçº§åŠŸèƒ½å‡çº§
- ğŸ¢ **æ–°å¢ä¼ä¸šçº§ç®¡ç†åŠŸèƒ½**
  - ä¼ä¸šç»„ç»‡åˆ›å»ºå’Œç®¡ç†
  - å¤šçº§éƒ¨é—¨ç»“æ„æ”¯æŒ
  - æ™ºèƒ½è´¦å·æ± ç®¡ç†
  - è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»
- ğŸ’° **é¢„ç®—æ§åˆ¶ç³»ç»Ÿ**
  - ä¼ä¸šçº§é¢„ç®—åˆ†é…
  - éƒ¨é—¨é¢„ç®—ç®¡ç†
  - æˆæœ¬ç›‘æ§å’Œå‘Šè­¦
- ğŸ‘¥ **æƒé™ç®¡ç†ç³»ç»Ÿ**
  - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
  - ä¼ä¸šç”¨æˆ·è§’è‰²åˆ†é…
  - ç»†ç²’åº¦æƒé™è®¾ç½®
- ğŸ”§ **å¼€å‘ä½“éªŒä¼˜åŒ–**
  - ç®¡ç†å‘˜è´¦å·åˆ›å»ºè„šæœ¬
  - ä¼ä¸šæ•°æ®ç§å­æ–‡ä»¶
  - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### v0.6.0 - æ ¸å¿ƒå¹³å°ç¨³å®šç‰ˆ
- âœ… æ‹¼è½¦ç»„ç®¡ç†å®Œæ•´åŠŸèƒ½
- âœ… å¤šAIæœåŠ¡æ”¯æŒå’Œæ™ºèƒ½è·¯ç”±
- âœ… é…é¢ç›‘æ§å’Œå®æ—¶å‘Šè­¦
- âœ… ä»£ç†ç®¡ç†å’Œéƒ¨ç½²æ¨¡å¼é€‰æ‹©

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MITè®¸å¯è¯](LICENSE)ã€‚

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªâ­Staræ”¯æŒä¸€ä¸‹ï¼**

</div>